{% extends 'index.html' %}


{% block nav %}
<style>
    .site-navigation {
        padding: 0px;
        border-bottom: 1px solid #EBF4F8;
    }
    .navbar-brand img {
        width: 236px;
        height: 45px;
}
</style>
<header>

    <!-- Main Menu Start -->

    <div class="site-navigation main_menu menu-transparent" id="mainmenu-area">
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid container-padding">
                <a class="navbar-brand" href="index.html">
                    <img src="/img/logo_4.png" alt="Eduhash" class="img-fluid">
                </a>

                <!-- Toggler -->

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMenu" aria-controls="navbarMenu" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="fa fa-bars"></span>
                </button>

                <!-- Collapse -->
                <div class="collapse navbar-collapse" id="navbarMenu">

                    <ul class="navbar-nav mx-auto">


                    </ul>

                    <div class="d-flex align-items-center">
                            <a style = "color:#6C6C6C" class="nav-link" href="/myadmin/" role="button" >
                                 報名狀況
                            </a>
                            <a style = "color:#6C6C6C" class="nav-link" href="/myadmin/create/" role="button" >
                                 創建學員
                            </a>

                            <a style = "color:#6C6C6C" class="nav-link" href="/myadmin/info/" role="button" >
                                 新增課程
                            </a>
                            <a style = "color:#6C6C6C" class="nav-link" href="/myadmin/upload/" role="button" >
                                 上傳教材
                            </a>


                            <a style = "color:#6C6C6C" onclick="logout_()" class="nav-link">
                                登出
                            </a>
                    </div>
                </div> <!-- / .navbar-collapse -->
            </div> <!-- / .container -->
        </nav>
    </div>
</header>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js"></script>
<script>
        function logout_(){
            swal({
                'title':'確定要登出嗎',
                'text':'',
                'buttons':['取消','確認'],
                'icon':'info',
            }).then(confirm=>{
                if(confirm) {
                    axios.post('/myadmin/logout/').then(()=>{
                        swal({
                            'title':'已登出',
                            'text':'正在導向主頁面',
                            'buttons':false,
                            'icon':'success',
                            'timer':1500,
                        })
                        setTimeout(()=>{
                            location.href = '/'
                        },1500)
                    })
                }
            })
        }
</script>
{% endblock %}

{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<style>
	.content{
		margin-top :100px;
	}
	.col-md-9 {
		width: 83.33333333%;
		float: none;
	}
	@media (max-width: 991px) {
        .col-md-9 {
            width: 95%;
            float: none;
        }
    }
</style>
<div class="content" >
	<div class="page-inner">
		<div class="row" >
			<div class="col-md-7" style="display: flow;margin-left: auto;margin-right: auto">
				<div class="card">
					<div class="card-header">
						<div class="card-title">詳細資訊</div>
					</div>
					<div class="card-body">
                        <table class="table table-hover">
							<thead>
							<tr style="cursor: auto;">
								<th scope="col">{{ contact.name }}</th>
							</tr>
							</thead>
							<tbody id="contact_">
							    <tr>
                                    <th scope="col">{{ contact.date }}</th>
                                </tr>
								<tr>
                                    <th scope="col">{{ contact.email }}</th>
                                </tr>
                                <tr style="cursor: auto;">
                                    <th scope="col">{{ contact.phone }}</th>
                                </tr>
                                <tr style="cursor: auto;">
                                    <th scope="col">{{ contact.text }}</th>
                                </tr>
                                {% if contact.is_contact %}
                                    <tr style="cursor: auto; color: #39d10a">
                                        <th  scope="col">已聯絡</th>
                                    </tr>
                                {% else %}
                                    <tr style="cursor: auto; color: #cc0000">
                                        <th scope="col">尚未聯絡</th>
                                    </tr>
                                {% endif %}
                                {% if contact.is_sign %}
                                    <tr style="cursor: auto; color: #39d10a">
                                        <th  scope="col">已報名</th>
                                    </tr>
                                {% else %}
                                    <tr style="cursor: auto; color: #cc0000">
                                        <th scope="col">尚未報名</th>
                                    </tr>
                                {% endif %}
                                <tr style="cursor: auto;">
                                    <th scope="col">
                                        <a onclick="delete_({{contact.id}})" style="cursor: auto; color: #cc0000" >刪除此聯絡人</a>
                                    </th>
                                </tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.24.0/axios.min.js"></script>
<script>



    function delete_(id){
        swal({
            'icon':'info',
            'buttons':['取消','刪除'],
            'title': '確定要刪除',
            'text':'一但刪除將無法復原'
        }).then((confirm)=>{
            if(confirm){
                axios.post(`/myadmin/delete/${id}/`).then(res=>{
                    if(res.data.errno == 0){
                        swal({
                            'icon':'success',
                            'buttons':false,
                            'title': '已成功刪除',
                            'text':'\n',
                            'timer':1500
                        })
                        setTimeout(()=>{
                            location.href = '/myadmin/'
                        },1500)
                    }
                })
            }
        })
    }



    function info(){
    }


</script>
{% endblock %}

{% block footer %}
{% endblock %}